/* The name of this program is eqns.c */
/* Created by Autolev 4.1 on Tue Aug 30 22:24:15 2011 */

#include <ctype.h> 
#include <math.h>  
#include <stdarg.h>
#include <stdio.h> 
#include <stdlib.h>
#include <string.h>
#define  _NAN      9.99999999999999E+305

void     eqns1     (void);
void     output    (FILE *Fptr[] );
void     readf     (FILE *Fp, double *next, ...);
void     pgets     (FILE *Fp, double *x);
void     writef    (FILE *Fp, char format[], ...);

double   fl,Ia,Ib,Ic,kFa,kFb,kFc,krb,krc,kTa,kTb,kTc,l,ma,mb,mc,oq4,oq5,oq6,oq7,
  oq8,r,Tq4,Tq5,Tq6,Tq7,Tq8,wvx,wvy,q3,q4,q5,q6,q7,q8,u1,u2,u3,u4,u5,u6,u7,u8,
  u1p,u2p,u3p,u4p,u5p,u6p,u7p,u8p;
double   Pi,DEGtoRAD,RADtoDEG,z[147];

/* ................................ MAIN ............................. */
int      main         (void)
{
FILE     *Fptr[2];
int      iloop;

/* Open input and output files */
for(iloop=0;  iloop<=1;  iloop++)
  {
  char fileName[256];
  if( !iloop ) strcpy(fileName, "eqns.in");
  else sprintf(fileName, "eqns.%d", iloop);
  if( (Fptr[iloop] = fopen(fileName, iloop ? "w" : "r")) == NULL)
    {printf("Error: unable to open file %s\n", fileName);  exit(0);}
  }
 
/* Read top of input file */
for(iloop=0;  iloop<6;  iloop++) pgets(Fptr[0],NULL);

/* Read values of constants from input file */
readf(Fptr[0],&fl,&Ia,&Ib,&Ic,&kFa,&kFb,&kFc,&krb,&krc,&kTa,&kTb,&kTc,&l,&ma,&
  mb,&mc,&oq4,&oq5,&oq6,&oq7,&oq8,&r,&Tq4,&Tq5,&Tq6,&Tq7,&Tq8,&wvx,&wvy,&q3,&q4,&
  q5,&q6,&q7,&q8,&u1,&u2,&u3,&u4,&u5,&u6,&u7,&u8,&u1p,&u2p,&u3p,&u4p,&u5p,&u6p,&
  u7p,&u8p,NULL);

/* Write heading(s) to output file(s) */
fprintf(stdout,  "%% FILE: eqns.1\n%%\n");
fprintf(stdout,  "%%    eqns[1]        eqns[2]        eqns[3]        eqns[4]        eqns[5]        eqns[6]        eqns[7]        eqns[8]\n"
                 "%%    (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)\n\n" );
fprintf(Fptr[1], "%% FILE: eqns.1\n%%\n");
fprintf(Fptr[1], "%%    eqns[1]        eqns[2]        eqns[3]        eqns[4]        eqns[5]        eqns[6]        eqns[7]        eqns[8]\n"
                 "%%    (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)        (UNITS)\n\n" );

/* Unit conversions */
  Pi       = 3.141592653589793;
  DEGtoRAD = Pi/180.0;
  RADtoDEG = 180.0/Pi;

/* Evaluate output quantities */
eqns1();
output( Fptr );

/* Inform user of input and output filename(s) */
puts( "\n Input is in the file eqns.in" );
puts( "\n Output is in the file eqns.1" );
puts( "\n The output quantities and associated files are listed in file "
      "eqns.dir\n" );
return 0;
}


/* ................................ EQNS1 ............................. */
void     eqns1        (void)
{

/* Evaluate constants */
  z[1] = cos(q3);
  z[2] = sin(q3);
  z[3] = cos(oq4+q4);
  z[4] = sin(oq4+q4);
  z[5] = cos(oq5+q5);
  z[6] = sin(oq5+q5);
  z[7] = cos(oq6+q6);
  z[8] = sin(oq6+q6);
  z[9] = cos(oq7+q7);
  z[10] = sin(oq7+q7);
  z[11] = cos(oq8+q8);
  z[12] = sin(oq8+q8);
  z[13] = z[1]*z[3] - z[2]*z[4];
  z[14] = -z[1]*z[4] - z[2]*z[3];
  z[15] = z[1]*z[4] + z[2]*z[3];
  z[16] = z[1]*z[5] - z[2]*z[6];
  z[17] = -z[1]*z[6] - z[2]*z[5];
  z[18] = z[1]*z[6] + z[2]*z[5];
  z[19] = z[1]*z[7] - z[2]*z[8];
  z[20] = -z[1]*z[8] - z[2]*z[7];
  z[21] = z[1]*z[8] + z[2]*z[7];
  z[22] = z[1]*z[9] - z[2]*z[10];
  z[23] = -z[1]*z[10] - z[2]*z[9];
  z[24] = z[1]*z[10] + z[2]*z[9];
  z[25] = z[1]*z[11] - z[2]*z[12];
  z[26] = -z[1]*z[12] - z[2]*z[11];
  z[27] = z[1]*z[12] + z[2]*z[11];
  z[28] = r*u3;
  z[29] = l*(u3+u4);
  z[30] = u3*z[28];
  z[31] = (u3+u4)*z[29];
  z[32] = fl*(u3+u5);
  z[33] = (u3+u5)*z[32];
  z[34] = fl*(u3+u6);
  z[35] = (u3+u6)*z[34];
  z[36] = fl*(u3+u7);
  z[37] = (u3+u7)*z[36];
  z[38] = fl*(u3+u8);
  z[39] = (u3+u8)*z[38];
  z[40] = fabs(u3);
  z[41] = kTa*u3*z[40];
  z[42] = fabs(u4);
  z[43] = kTb*u4*z[42];
  z[44] = fabs(u5);
  z[45] = kTc*u5*z[44];
  z[46] = fabs(u6);
  z[47] = kTc*u6*z[46];
  z[48] = fabs(u7);
  z[49] = kTc*u7*z[48];
  z[50] = fabs(u8);
  z[51] = kTc*u8*z[50];
  z[52] = z[41] - Tq4;
  z[53] = z[52] - Tq5;
  z[54] = z[53] - Tq6;
  z[55] = z[54] - Tq7;
  z[56] = z[55] - Tq8;
  z[57] = u1 - wvx;
  z[58] = u2 - wvy;
  z[59] = kFa*(wvx-u1)*pow((pow(z[57],2)+pow(z[58],2)),0.5);
  z[60] = kFa*(wvy-u2)*pow((pow(z[57],2)+pow(z[58],2)),0.5);
  z[61] = fabs(r*z[3]*u3+0.5*l*(u3+u4)+0.5*krb*pow((4*pow(u1,2)+4*pow(u2,2)+
  pow(z[29],2)+4*pow(z[28],2)+4*z[3]*z[28]*z[29]+4*z[13]*u1*z[29]+4*z[15]*u2*
  z[29]+8*z[1]*u1*z[28]+8*z[2]*u2*z[28]),0.5)-z[13]*(wvx-u1)-z[15]*(wvy-u2));
  z[62] = kFb*l*r;
  z[63] = z[62]*u3*z[61];
  z[64] = kFb*pow(l,2);
  z[65] = z[64]*(u3+u4)*z[61];
  z[66] = kFb*l;
  z[67] = z[66]*(wvx-u1)*z[61];
  z[68] = z[66]*(wvy-u2)*z[61];
  z[69] = fabs(0.7071067811865475*r*z[5]*u3+0.7071067811865475*r*z[6]*u3+0.5*
  fl*(u3+u5)+0.5*krc*pow((4*pow(u1,2)+4*pow(u2,2)+pow(z[32],2)+3.999999999999999*
  pow(z[28],2)+2.82842712474619*z[5]*z[28]*z[32]+2.82842712474619*z[6]*z[28]*
  z[32]+4*z[16]*u1*z[32]+4*z[18]*u2*z[32]+5.65685424949238*z[1]*u1*z[28]+
  5.65685424949238*z[1]*u2*z[28]+5.65685424949238*z[2]*u2*z[28]-5.65685424949238*
  z[2]*u1*z[28]),0.5)-z[16]*(wvx-u1)-z[18]*(wvy-u2));
  z[70] = fl*kFc*r;
  z[71] = z[70]*u3*z[69];
  z[72] = kFc*pow(fl,2);
  z[73] = z[72]*(u3+u5)*z[69];
  z[74] = fl*kFc;
  z[75] = z[74]*(wvx-u1)*z[69];
  z[76] = z[74]*(wvy-u2)*z[69];
  z[77] = fabs(0.7071067811865475*r*z[8]*u3+0.5*fl*(u3+u6)+0.5*krc*pow((4*
  pow(u1,2)+4*pow(u2,2)+pow(z[34],2)+3.999999999999999*pow(z[28],2)+2.82842712474619*
  z[8]*z[28]*z[34]+4*z[19]*u1*z[34]+4*z[21]*u2*z[34]+5.65685424949238*z[1]*u2*
  z[28]-5.65685424949238*z[1]*u1*z[28]-5.65685424949238*z[2]*u1*z[28]-5.65685424949238*
  z[2]*u2*z[28]-2.82842712474619*z[7]*z[28]*z[34]),0.5)-0.7071067811865475*r*
  z[7]*u3-z[19]*(wvx-u1)-z[21]*(wvy-u2));
  z[78] = z[70]*u3*z[77];
  z[79] = z[72]*(u3+u6)*z[77];
  z[80] = z[74]*(wvx-u1)*z[77];
  z[81] = z[74]*(wvy-u2)*z[77];
  z[82] = fabs(0.5*fl*(u3+u7)+0.5*krc*pow((4*pow(u1,2)+4*pow(u2,2)+pow(z[36],
  2)+3.999999999999999*pow(z[28],2)+4*z[22]*u1*z[36]+4*z[24]*u2*z[36]+5.65685424949238*
  z[2]*u1*z[28]-5.65685424949238*z[1]*u1*z[28]-5.65685424949238*z[1]*u2*z[28]-
  5.65685424949238*z[2]*u2*z[28]-2.82842712474619*z[9]*z[28]*z[36]-2.82842712474619*
  z[10]*z[28]*z[36]),0.5)-0.7071067811865475*r*z[9]*u3-0.7071067811865475*r*
  z[10]*u3-z[22]*(wvx-u1)-z[24]*(wvy-u2));
  z[83] = z[70]*u3*z[82];
  z[84] = z[72]*(u3+u7)*z[82];
  z[85] = z[74]*(wvx-u1)*z[82];
  z[86] = z[74]*(wvy-u2)*z[82];
  z[87] = fabs(0.7071067811865475*r*z[11]*u3+0.5*fl*(u3+u8)+0.5*krc*pow((4*
  pow(u1,2)+4*pow(u2,2)+pow(z[38],2)+3.999999999999999*pow(z[28],2)+2.82842712474619*
  z[11]*z[28]*z[38]+4*z[25]*u1*z[38]+4*z[27]*u2*z[38]+5.65685424949238*z[1]*
  u1*z[28]+5.65685424949238*z[2]*u1*z[28]+5.65685424949238*z[2]*u2*z[28]-
  5.65685424949238*z[1]*u2*z[28]-2.82842712474619*z[12]*z[28]*z[38]),0.5)-
  0.7071067811865475*r*z[12]*u3-z[25]*(wvx-u1)-z[27]*(wvy-u2));
  z[88] = z[70]*u3*z[87];
  z[89] = z[72]*(u3+u8)*z[87];
  z[90] = z[74]*(wvx-u1)*z[87];
  z[91] = z[74]*(wvy-u2)*z[87];
  z[92] = z[1]*z[63] + 0.5*z[13]*z[65] + 0.5*z[16]*z[73] + 0.5*z[19]*z[79] + 
  0.5*z[22]*z[84] + 0.5*z[25]*z[89] + 0.7071067811865475*z[1]*z[71] + 0.7071067811865475*
  z[1]*z[88] + 0.7071067811865475*z[2]*z[83] + 0.7071067811865475*z[2]*z[88] - 
  z[59] - z[67] - z[75] - z[80] - z[85] - z[90] - 0.7071067811865475*z[1]*
  z[78] - 0.7071067811865475*z[1]*z[83] - 0.7071067811865475*z[2]*z[71] - 
  0.7071067811865475*z[2]*z[78];
  z[93] = z[2]*z[63] + 0.5*z[15]*z[65] + 0.5*z[18]*z[73] + 0.5*z[21]*z[79] + 
  0.5*z[24]*z[84] + 0.5*z[27]*z[89] + 0.7071067811865475*z[1]*z[71] + 0.7071067811865475*
  z[1]*z[78] + 0.7071067811865475*z[2]*z[71] + 0.7071067811865475*z[2]*z[88] - 
  z[60] - z[68] - z[76] - z[81] - z[86] - z[91] - 0.7071067811865475*z[1]*
  z[83] - 0.7071067811865475*z[1]*z[88] - 0.7071067811865475*z[2]*z[78] - 
  0.7071067811865475*z[2]*z[83];
  z[94] = Tq4 + Tq5 + Tq6 + Tq7 + Tq8;
  z[95] = z[94] + z[43] + z[45] + z[47] + z[49] + z[51] + z[56] + r*z[63] + 
  0.25*fl*z[73] + 0.25*fl*z[79] + 0.25*fl*z[84] + 0.25*fl*z[89] + 0.25*l*
  z[65] + 0.9999999999999998*r*z[71] + 0.9999999999999998*r*z[78] + 0.9999999999999998*
  r*z[83] + 0.9999999999999998*r*z[88] + 0.3535533905932737*fl*z[5]*z[71] + 
  0.3535533905932737*fl*z[6]*z[71] + 0.3535533905932737*fl*z[8]*z[78] + 
  0.3535533905932737*fl*z[11]*z[88] + 0.3535533905932737*r*z[5]*z[73] + 
  0.3535533905932737*r*z[6]*z[73] + 0.3535533905932737*r*z[8]*z[79] + 0.3535533905932737*
  r*z[11]*z[89] + 0.5*l*z[3]*z[63] + 0.5*r*z[3]*z[65] + 0.7071067811865475*r*
  z[1]*z[80] + 0.7071067811865475*r*z[1]*z[85] + 0.7071067811865475*r*z[1]*
  z[86] + 0.7071067811865475*r*z[1]*z[91] + 0.7071067811865475*r*z[2]*z[75] + 
  0.7071067811865475*r*z[2]*z[80] + 0.7071067811865475*r*z[2]*z[81] + 0.7071067811865475*
  r*z[2]*z[86] - r*z[1]*z[67] - r*z[2]*z[68] - 0.7071067811865475*r*z[1]*
  z[75] - 0.7071067811865475*r*z[1]*z[76] - 0.7071067811865475*r*z[1]*z[81] - 
  0.7071067811865475*r*z[1]*z[90] - 0.7071067811865475*r*z[2]*z[76] - 0.7071067811865475*
  r*z[2]*z[85] - 0.7071067811865475*r*z[2]*z[90] - 0.7071067811865475*r*z[2]*
  z[91] - 0.5*fl*z[16]*z[75] - 0.5*fl*z[18]*z[76] - 0.5*fl*z[19]*z[80] - 0.5*
  fl*z[21]*z[81] - 0.5*fl*z[22]*z[85] - 0.5*fl*z[24]*z[86] - 0.5*fl*z[25]*
  z[90] - 0.5*fl*z[27]*z[91] - 0.5*l*z[13]*z[67] - 0.5*l*z[15]*z[68] - 0.3535533905932737*
  fl*z[7]*z[78] - 0.3535533905932737*fl*z[9]*z[83] - 0.3535533905932737*fl*
  z[10]*z[83] - 0.3535533905932737*fl*z[12]*z[88] - 0.3535533905932737*r*z[7]*
  z[79] - 0.3535533905932737*r*z[9]*z[84] - 0.3535533905932737*r*z[10]*z[84] - 
  0.3535533905932737*r*z[12]*z[89];
  z[96] = Tq4 + z[43] + 0.25*l*(z[65]+2*z[3]*z[63]-2*z[13]*z[67]-2*z[15]*
  z[68]);
  z[97] = Tq5 + z[45] + 0.25*fl*(z[73]+1.414213562373095*z[5]*z[71]+1.414213562373095*
  z[6]*z[71]-2*z[16]*z[75]-2*z[18]*z[76]);
  z[98] = Tq6 + z[47] + 0.25*fl*(z[79]+1.414213562373095*z[8]*z[78]-2*z[19]*
  z[80]-2*z[21]*z[81]-1.414213562373095*z[7]*z[78]);
  z[99] = Tq7 + z[49] + 0.25*fl*(z[84]-2*z[22]*z[85]-2*z[24]*z[86]-1.414213562373095*
  z[9]*z[83]-1.414213562373095*z[10]*z[83]);
  z[100] = Tq8 + z[51] + 0.25*fl*(z[89]+1.414213562373095*z[11]*z[88]-2*z[25]*
  z[90]-2*z[27]*z[91]-1.414213562373095*z[12]*z[88]);
  z[101] = mb*pow(l,2);
  z[104] = mc*pow(fl,2);
  z[110] = ma + mb + 4*mc;
  z[111] = fl*mc;
  z[112] = 0.5*z[111]*z[16] + 0.5*z[111]*z[19] + 0.5*z[111]*z[22] + 0.5*
  z[111]*z[25] + 0.5*mb*(l*z[13]+2*r*z[1]);
  z[113] = l*mb;
  z[114] = z[113]*z[13];
  z[115] = z[111]*z[16];
  z[116] = z[111]*z[19];
  z[117] = z[111]*z[22];
  z[118] = z[111]*z[25];
  z[119] = 0.5*mc*z[17]*z[33] + 0.5*mc*z[20]*z[35] + 0.5*mc*z[23]*z[37] + 0.5*
  mc*z[26]*z[39] - 0.5*mb*(2*z[2]*z[30]-z[14]*z[31]);
  z[120] = 0.5*z[111]*z[18] + 0.5*z[111]*z[21] + 0.5*z[111]*z[24] + 0.5*
  z[111]*z[27] + 0.5*mb*(l*z[15]+2*r*z[2]);
  z[121] = z[113]*z[15];
  z[122] = z[111]*z[18];
  z[123] = z[111]*z[21];
  z[124] = z[111]*z[24];
  z[125] = z[111]*z[27];
  z[126] = 0.5*mc*z[16]*z[33] + 0.5*mc*z[19]*z[35] + 0.5*mc*z[22]*z[37] + 0.5*
  mc*z[25]*z[39] + 0.5*mb*(z[13]*z[31]+2*z[1]*z[30]);
  z[127] = Ia + Ib + 4*Ic;
  z[128] = fl*mc*r;
  z[129] = mc*r;
  z[130] = pow(l,2) + 4*pow(r,2);
  z[131] = l*r;
  z[132] = z[127] + 0.7071067811865475*z[128]*(z[11]-z[12]) + 0.25*mb*(z[130]+
  4*z[131]*z[3]) + 0.7071067811865475*z[129]*(5.65685424949238*r+fl*z[5]+fl*
  z[6]) + 0.7071067811865475*z[111]*(1.414213562373095*fl-r*z[9]-r*z[10]) - 
  z[104] - 0.25*z[101] - 0.7071067811865475*z[128]*(z[7]-z[8]);
  z[133] = Ib + 0.25*z[113]*(l+2*r*z[3]) - 0.25*z[101];
  z[134] = Ic + 0.25*z[111]*(fl+1.414213562373095*r*z[5]+1.414213562373095*r*
  z[6]) - 0.25*z[104];
  z[135] = Ic - 0.25*z[104];
  z[136] = z[135] - 0.25*z[111]*(1.414213562373095*r*z[7]-fl-1.414213562373095*
  r*z[8]);
  z[137] = Ic + 0.25*z[111]*(fl-1.414213562373095*r*z[9]-1.414213562373095*r*
  z[10]) - 0.25*z[104];
  z[138] = Ic + 0.25*z[111]*(fl+1.414213562373095*r*z[11]-1.414213562373095*r*
  z[12]) - 0.25*z[104];
  z[139] = 0.5*mb*z[4]*(l*z[30]-r*z[31]) + 0.3535533905932737*mc*(fl*z[6]*
  z[30]+r*z[5]*z[33]-fl*z[5]*z[30]-r*z[6]*z[33]) + 0.3535533905932737*mc*(fl*
  z[11]*z[30]+fl*z[12]*z[30]-r*z[11]*z[39]-r*z[12]*z[39]) - 0.3535533905932737*
  mc*(fl*z[7]*z[30]+fl*z[8]*z[30]-r*z[7]*z[35]-r*z[8]*z[35]) - 0.3535533905932737*
  mc*(fl*z[10]*z[30]+r*z[9]*z[37]-fl*z[9]*z[30]-r*z[10]*z[37]);
  z[140] = Ib + 0.25*mb*pow(l,2) - 0.25*z[101];
  z[141] = z[113]*z[4]*z[30];
  z[142] = Ic + 0.25*mc*pow(fl,2) - 0.25*z[104];
  z[143] = z[111]*(z[5]-z[6])*z[30];
  z[144] = z[111]*(z[7]+z[8])*z[30];
  z[145] = z[111]*(z[9]-z[10])*z[30];
  z[146] = z[111]*(z[11]+z[12])*z[30];


/* Evaluate output quantities */
}


/* ................................ OUTPUT ............................. */
void     output (FILE *Fptr[] )
{
int      i1;

/* Write output to screen and to output file(s) */
  writef(stdout, " %- 14.6E", (z[92]-z[119]-z[110]*u1p-z[112]*u3p-0.5*z[114]*
  u4p-0.5*z[115]*u5p-0.5*z[116]*u6p-0.5*z[117]*u7p-0.5*z[118]*u8p),(z[93]-
  z[126]-z[110]*u2p-z[120]*u3p-0.5*z[121]*u4p-0.5*z[122]*u5p-0.5*z[123]*u6p-
  0.5*z[124]*u7p-0.5*z[125]*u8p),(z[95]-z[139]-z[112]*u1p-z[120]*u2p-z[132]*
  u3p-z[133]*u4p-z[134]*u5p-z[136]*u6p-z[137]*u7p-z[138]*u8p),(z[96]-0.5*
  z[141]-z[140]*u4p-z[133]*u3p-0.5*z[114]*u1p-0.5*z[121]*u2p),(z[97]+0.3535533905932737*
  z[143]-z[142]*u5p-z[134]*u3p-0.5*z[115]*u1p-0.5*z[122]*u2p),(z[98]+0.3535533905932737*
  z[144]-z[142]*u6p-z[136]*u3p-0.5*z[116]*u1p-0.5*z[123]*u2p),(z[99]-0.3535533905932737*
  z[145]-z[142]*u7p-z[137]*u3p-0.5*z[117]*u1p-0.5*z[124]*u2p),(z[100]-0.3535533905932737*
  z[146]-z[142]*u8p-z[138]*u3p-0.5*z[118]*u1p-0.5*z[125]*u2p),_NAN);
  writef(Fptr[1]," %- 14.6E", (z[92]-z[119]-z[110]*u1p-z[112]*u3p-0.5*z[114]*
  u4p-0.5*z[115]*u5p-0.5*z[116]*u6p-0.5*z[117]*u7p-0.5*z[118]*u8p),(z[93]-
  z[126]-z[110]*u2p-z[120]*u3p-0.5*z[121]*u4p-0.5*z[122]*u5p-0.5*z[123]*u6p-
  0.5*z[124]*u7p-0.5*z[125]*u8p),(z[95]-z[139]-z[112]*u1p-z[120]*u2p-z[132]*
  u3p-z[133]*u4p-z[134]*u5p-z[136]*u6p-z[137]*u7p-z[138]*u8p),(z[96]-0.5*
  z[141]-z[140]*u4p-z[133]*u3p-0.5*z[114]*u1p-0.5*z[121]*u2p),(z[97]+0.3535533905932737*
  z[143]-z[142]*u5p-z[134]*u3p-0.5*z[115]*u1p-0.5*z[122]*u2p),(z[98]+0.3535533905932737*
  z[144]-z[142]*u6p-z[136]*u3p-0.5*z[116]*u1p-0.5*z[123]*u2p),(z[99]-0.3535533905932737*
  z[145]-z[142]*u7p-z[137]*u3p-0.5*z[117]*u1p-0.5*z[124]*u2p),(z[100]-0.3535533905932737*
  z[146]-z[142]*u8p-z[138]*u3p-0.5*z[118]*u1p-0.5*z[125]*u2p),_NAN);
}


/*................................... READF ................................*/
void  readf( FILE *Fp, double *next, ... )
{
va_list args;                                    /* Variable argument list  */
for( va_start(args,next);  next;  next=va_arg(args,double *) )
  pgets(Fp,next);
va_end(args);                          /* Help function make normal return  */
pgets(Fp,NULL);                        /* Always get a newline at the end   */
}


/*................................... PGETS ................................*/
void  pgets( FILE *Fp, double *x )
{
static long  lineNumber = 0;
char         line[256];

lineNumber++;
if( !fgets(line,256,Fp) )
{
   printf("\n Unable to read line %ld of input file."
          "\n Premature end of file found while reading input file\n", lineNumber);
   exit(0);
}
if( !x ) return;
if( strlen(line) >= 60 )
{
   char *endOfNumber;
   *x = strtod(line+59,&endOfNumber);
   while( isspace(*endOfNumber) )  endOfNumber++;
   if( !*endOfNumber ) return;
}
printf("\n An error occured while reading line %ld of the input file."
       "\n The program was expecting to find one double precision number"
       "\n beginning with the 60th character in the following line:\n\n%s\n",
           lineNumber, line );
exit(0);
}


/* .................................. WRITEF .............................. */
void  writef( FILE *Fp, char format[], ... )
{
va_list  args;                                   /* Variable argument list  */
double   next;                                   /* Current place in list   */

va_start(args,format);                           /* args start after format */
while( (next=va_arg(args,double)) != _NAN )  fprintf(Fp, format, next);
va_end(args);                                    /* End of variable list    */
fprintf(Fp, "\n");                               /* End with newline        */
}


